"use strict";

const params = window.location.search.substring(1).split('&');
let lockOrigin;

for (let i = 0; i < params.length; ++i) {
  const parts = params[i].split('=');
  if (parts[0] === 'origin') lockOrigin = decodeURIComponent(parts[1]);
}

function remoteRender(event) {
  const data = event.data;
  const img = document.createElement("img");
  img.id = "img";
  img.src = data.imgSrc;
  img.style = data.imgStyle;
  const a = document.createElement("a");
  a.id = "a";
  a.rel = "noreferrer noopener";
  a.download = data.download;
  a.style = data.style;
  a.style.fontFamily = "Arial, Helvetica, Sans-Serif";
  a.href = window.URL.createObjectURL(data.blob);
  a.appendChild(img);
  a.appendChild(document.createTextNode(data.textContent));
  const body = document.body; // Don't display scrollbars if the link takes more than one line to display.

  body.style = "margin: 0px; overflow: hidden";
  body.appendChild(a);

  if (event.data.auto) {
    a.click(); // try to trigger download automatically
  }
}

function remoteSetTint(event) {
  const data = event.data;
  const img = document.getElementById("img");
  img.src = data.imgSrc;
  img.style = data.imgStyle;
  const a = document.getElementById("a");
  a.style = data.style;
}

window.onmessage = function (e) {
  if (e.origin === lockOrigin) {
    if (e.data.blob) remoteRender(e);else remoteSetTint(e);
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91c2VyY29udGVudC9pbmRleC5qcyJdLCJuYW1lcyI6WyJwYXJhbXMiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNlYXJjaCIsInN1YnN0cmluZyIsInNwbGl0IiwibG9ja09yaWdpbiIsImkiLCJsZW5ndGgiLCJwYXJ0cyIsImRlY29kZVVSSUNvbXBvbmVudCIsInJlbW90ZVJlbmRlciIsImV2ZW50IiwiZGF0YSIsImltZyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImlkIiwic3JjIiwiaW1nU3JjIiwic3R5bGUiLCJpbWdTdHlsZSIsImEiLCJyZWwiLCJkb3dubG9hZCIsImZvbnRGYW1pbHkiLCJocmVmIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiYmxvYiIsImFwcGVuZENoaWxkIiwiY3JlYXRlVGV4dE5vZGUiLCJ0ZXh0Q29udGVudCIsImJvZHkiLCJhdXRvIiwiY2xpY2siLCJyZW1vdGVTZXRUaW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJvbm1lc3NhZ2UiLCJlIiwib3JpZ2luIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLE1BQU0sR0FBR0MsTUFBTSxDQUFDQyxRQUFQLENBQWdCQyxNQUFoQixDQUF1QkMsU0FBdkIsQ0FBaUMsQ0FBakMsRUFBb0NDLEtBQXBDLENBQTBDLEdBQTFDLENBQWY7QUFDQSxJQUFJQyxVQUFKOztBQUNBLEtBQUssSUFBSUMsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR1AsTUFBTSxDQUFDUSxNQUEzQixFQUFtQyxFQUFFRCxDQUFyQyxFQUF3QztBQUNwQyxRQUFNRSxLQUFLLEdBQUdULE1BQU0sQ0FBQ08sQ0FBRCxDQUFOLENBQVVGLEtBQVYsQ0FBZ0IsR0FBaEIsQ0FBZDtBQUNBLE1BQUlJLEtBQUssQ0FBQyxDQUFELENBQUwsS0FBYSxRQUFqQixFQUEyQkgsVUFBVSxHQUFHSSxrQkFBa0IsQ0FBQ0QsS0FBSyxDQUFDLENBQUQsQ0FBTixDQUEvQjtBQUM5Qjs7QUFFRCxTQUFTRSxZQUFULENBQXNCQyxLQUF0QixFQUE2QjtBQUN6QixRQUFNQyxJQUFJLEdBQUdELEtBQUssQ0FBQ0MsSUFBbkI7QUFFQSxRQUFNQyxHQUFHLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixLQUF2QixDQUFaO0FBQ0FGLEVBQUFBLEdBQUcsQ0FBQ0csRUFBSixHQUFTLEtBQVQ7QUFDQUgsRUFBQUEsR0FBRyxDQUFDSSxHQUFKLEdBQVVMLElBQUksQ0FBQ00sTUFBZjtBQUNBTCxFQUFBQSxHQUFHLENBQUNNLEtBQUosR0FBWVAsSUFBSSxDQUFDUSxRQUFqQjtBQUVBLFFBQU1DLENBQUMsR0FBR1AsUUFBUSxDQUFDQyxhQUFULENBQXVCLEdBQXZCLENBQVY7QUFDQU0sRUFBQUEsQ0FBQyxDQUFDTCxFQUFGLEdBQU8sR0FBUDtBQUNBSyxFQUFBQSxDQUFDLENBQUNDLEdBQUYsR0FBUSxxQkFBUjtBQUNBRCxFQUFBQSxDQUFDLENBQUNFLFFBQUYsR0FBYVgsSUFBSSxDQUFDVyxRQUFsQjtBQUNBRixFQUFBQSxDQUFDLENBQUNGLEtBQUYsR0FBVVAsSUFBSSxDQUFDTyxLQUFmO0FBQ0FFLEVBQUFBLENBQUMsQ0FBQ0YsS0FBRixDQUFRSyxVQUFSLEdBQXFCLDhCQUFyQjtBQUNBSCxFQUFBQSxDQUFDLENBQUNJLElBQUYsR0FBU3pCLE1BQU0sQ0FBQzBCLEdBQVAsQ0FBV0MsZUFBWCxDQUEyQmYsSUFBSSxDQUFDZ0IsSUFBaEMsQ0FBVDtBQUNBUCxFQUFBQSxDQUFDLENBQUNRLFdBQUYsQ0FBY2hCLEdBQWQ7QUFDQVEsRUFBQUEsQ0FBQyxDQUFDUSxXQUFGLENBQWNmLFFBQVEsQ0FBQ2dCLGNBQVQsQ0FBd0JsQixJQUFJLENBQUNtQixXQUE3QixDQUFkO0FBRUEsUUFBTUMsSUFBSSxHQUFHbEIsUUFBUSxDQUFDa0IsSUFBdEIsQ0FsQnlCLENBbUJ6Qjs7QUFDQUEsRUFBQUEsSUFBSSxDQUFDYixLQUFMLEdBQWEsK0JBQWI7QUFDQWEsRUFBQUEsSUFBSSxDQUFDSCxXQUFMLENBQWlCUixDQUFqQjs7QUFFQSxNQUFJVixLQUFLLENBQUNDLElBQU4sQ0FBV3FCLElBQWYsRUFBcUI7QUFDakJaLElBQUFBLENBQUMsQ0FBQ2EsS0FBRixHQURpQixDQUNOO0FBQ2Q7QUFDSjs7QUFFRCxTQUFTQyxhQUFULENBQXVCeEIsS0FBdkIsRUFBOEI7QUFDMUIsUUFBTUMsSUFBSSxHQUFHRCxLQUFLLENBQUNDLElBQW5CO0FBRUEsUUFBTUMsR0FBRyxHQUFHQyxRQUFRLENBQUNzQixjQUFULENBQXdCLEtBQXhCLENBQVo7QUFDQXZCLEVBQUFBLEdBQUcsQ0FBQ0ksR0FBSixHQUFVTCxJQUFJLENBQUNNLE1BQWY7QUFDQUwsRUFBQUEsR0FBRyxDQUFDTSxLQUFKLEdBQVlQLElBQUksQ0FBQ1EsUUFBakI7QUFFQSxRQUFNQyxDQUFDLEdBQUdQLFFBQVEsQ0FBQ3NCLGNBQVQsQ0FBd0IsR0FBeEIsQ0FBVjtBQUNBZixFQUFBQSxDQUFDLENBQUNGLEtBQUYsR0FBVVAsSUFBSSxDQUFDTyxLQUFmO0FBQ0g7O0FBRURuQixNQUFNLENBQUNxQyxTQUFQLEdBQW1CLFVBQVNDLENBQVQsRUFBWTtBQUMzQixNQUFJQSxDQUFDLENBQUNDLE1BQUYsS0FBYWxDLFVBQWpCLEVBQTZCO0FBQ3pCLFFBQUlpQyxDQUFDLENBQUMxQixJQUFGLENBQU9nQixJQUFYLEVBQWlCbEIsWUFBWSxDQUFDNEIsQ0FBRCxDQUFaLENBQWpCLEtBQ0tILGFBQWEsQ0FBQ0csQ0FBRCxDQUFiO0FBQ1I7QUFDSixDQUxEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcGFyYW1zID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSkuc3BsaXQoJyYnKTtcbmxldCBsb2NrT3JpZ2luO1xuZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJhbXMubGVuZ3RoOyArK2kpIHtcbiAgICBjb25zdCBwYXJ0cyA9IHBhcmFtc1tpXS5zcGxpdCgnPScpO1xuICAgIGlmIChwYXJ0c1swXSA9PT0gJ29yaWdpbicpIGxvY2tPcmlnaW4gPSBkZWNvZGVVUklDb21wb25lbnQocGFydHNbMV0pO1xufVxuXG5mdW5jdGlvbiByZW1vdGVSZW5kZXIoZXZlbnQpIHtcbiAgICBjb25zdCBkYXRhID0gZXZlbnQuZGF0YTtcblxuICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgaW1nLmlkID0gXCJpbWdcIjtcbiAgICBpbWcuc3JjID0gZGF0YS5pbWdTcmM7XG4gICAgaW1nLnN0eWxlID0gZGF0YS5pbWdTdHlsZTtcblxuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICBhLmlkID0gXCJhXCI7XG4gICAgYS5yZWwgPSBcIm5vcmVmZXJyZXIgbm9vcGVuZXJcIjtcbiAgICBhLmRvd25sb2FkID0gZGF0YS5kb3dubG9hZDtcbiAgICBhLnN0eWxlID0gZGF0YS5zdHlsZTtcbiAgICBhLnN0eWxlLmZvbnRGYW1pbHkgPSBcIkFyaWFsLCBIZWx2ZXRpY2EsIFNhbnMtU2VyaWZcIjtcbiAgICBhLmhyZWYgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChkYXRhLmJsb2IpO1xuICAgIGEuYXBwZW5kQ2hpbGQoaW1nKTtcbiAgICBhLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGRhdGEudGV4dENvbnRlbnQpKTtcblxuICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuICAgIC8vIERvbid0IGRpc3BsYXkgc2Nyb2xsYmFycyBpZiB0aGUgbGluayB0YWtlcyBtb3JlIHRoYW4gb25lIGxpbmUgdG8gZGlzcGxheS5cbiAgICBib2R5LnN0eWxlID0gXCJtYXJnaW46IDBweDsgb3ZlcmZsb3c6IGhpZGRlblwiO1xuICAgIGJvZHkuYXBwZW5kQ2hpbGQoYSk7XG5cbiAgICBpZiAoZXZlbnQuZGF0YS5hdXRvKSB7XG4gICAgICAgIGEuY2xpY2soKTsgLy8gdHJ5IHRvIHRyaWdnZXIgZG93bmxvYWQgYXV0b21hdGljYWxseVxuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVtb3RlU2V0VGludChldmVudCkge1xuICAgIGNvbnN0IGRhdGEgPSBldmVudC5kYXRhO1xuXG4gICAgY29uc3QgaW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbWdcIik7XG4gICAgaW1nLnNyYyA9IGRhdGEuaW1nU3JjO1xuICAgIGltZy5zdHlsZSA9IGRhdGEuaW1nU3R5bGU7XG5cbiAgICBjb25zdCBhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhXCIpO1xuICAgIGEuc3R5bGUgPSBkYXRhLnN0eWxlO1xufVxuXG53aW5kb3cub25tZXNzYWdlID0gZnVuY3Rpb24oZSkge1xuICAgIGlmIChlLm9yaWdpbiA9PT0gbG9ja09yaWdpbikge1xuICAgICAgICBpZiAoZS5kYXRhLmJsb2IpIHJlbW90ZVJlbmRlcihlKTtcbiAgICAgICAgZWxzZSByZW1vdGVTZXRUaW50KGUpO1xuICAgIH1cbn07XG4iXX0=