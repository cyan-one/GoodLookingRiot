"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.registerShortcut = exports.toggleDialog = exports.CMD_OR_CTRL = exports.Modifiers = exports.Categories = void 0;

var React = _interopRequireWildcard(require("react"));

var _classnames = _interopRequireDefault(require("classnames"));

var sdk = _interopRequireWildcard(require("../index"));

var _Modal = _interopRequireDefault(require("../Modal"));

var _languageHandler = require("../languageHandler");

var _Keyboard = require("../Keyboard");

/*
Copyright 2020 The Matrix.org Foundation C.I.C.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
// TS: once languageHandler is TS we can probably inline this into the enum
(0, _languageHandler._td)("Navigation");
(0, _languageHandler._td)("Calls");
(0, _languageHandler._td)("Composer");
(0, _languageHandler._td)("Room List");
(0, _languageHandler._td)("Autocomplete");
let Categories; // TS: once languageHandler is TS we can probably inline this into the enum

exports.Categories = Categories;

(function (Categories) {
  Categories["NAVIGATION"] = "Navigation";
  Categories["CALLS"] = "Calls";
  Categories["COMPOSER"] = "Composer";
  Categories["ROOM_LIST"] = "Room List";
  Categories["ROOM"] = "Room";
  Categories["AUTOCOMPLETE"] = "Autocomplete";
})(Categories || (exports.Categories = Categories = {}));

(0, _languageHandler._td)("Alt");
(0, _languageHandler._td)("Alt Gr");
(0, _languageHandler._td)("Shift");
(0, _languageHandler._td)("Super");
(0, _languageHandler._td)("Ctrl");
let Modifiers; // Meta-modifier: isMac ? CMD : CONTROL

exports.Modifiers = Modifiers;

(function (Modifiers) {
  Modifiers["ALT"] = "Alt";
  Modifiers["ALT_GR"] = "Alt Gr";
  Modifiers["SHIFT"] = "Shift";
  Modifiers["SUPER"] = "Super";
  Modifiers["COMMAND"] = "Command";
  Modifiers["CONTROL"] = "Ctrl";
})(Modifiers || (exports.Modifiers = Modifiers = {}));

const CMD_OR_CTRL = _Keyboard.isMac ? Modifiers.COMMAND : Modifiers.CONTROL;
exports.CMD_OR_CTRL = CMD_OR_CTRL;
const shortcuts
/*: Record<Categories, IShortcut[]>*/
= {
  [Categories.COMPOSER]: [{
    keybinds: [{
      modifiers: [CMD_OR_CTRL],
      key: _Keyboard.Key.B
    }],
    description: (0, _languageHandler._td)("Toggle Bold")
  }, {
    keybinds: [{
      modifiers: [CMD_OR_CTRL],
      key: _Keyboard.Key.I
    }],
    description: (0, _languageHandler._td)("Toggle Italics")
  }, {
    keybinds: [{
      modifiers: [CMD_OR_CTRL],
      key: _Keyboard.Key.GREATER_THAN
    }],
    description: (0, _languageHandler._td)("Toggle Quote")
  }, {
    keybinds: [{
      modifiers: [Modifiers.SHIFT],
      key: _Keyboard.Key.ENTER
    }],
    description: (0, _languageHandler._td)("New line")
  }, {
    keybinds: [{
      key: _Keyboard.Key.ARROW_UP
    }, {
      key: _Keyboard.Key.ARROW_DOWN
    }],
    description: (0, _languageHandler._td)("Navigate recent messages to edit")
  }, {
    keybinds: [{
      modifiers: [CMD_OR_CTRL],
      key: _Keyboard.Key.HOME
    }, {
      modifiers: [CMD_OR_CTRL],
      key: _Keyboard.Key.END
    }],
    description: (0, _languageHandler._td)("Jump to start/end of the composer")
  }, {
    keybinds: [{
      modifiers: [Modifiers.CONTROL, Modifiers.ALT],
      key: _Keyboard.Key.ARROW_UP
    }, {
      modifiers: [Modifiers.CONTROL, Modifiers.ALT],
      key: _Keyboard.Key.ARROW_DOWN
    }],
    description: (0, _languageHandler._td)("Navigate composer history")
  }, {
    keybinds: [{
      key: _Keyboard.Key.ESCAPE
    }],
    description: (0, _languageHandler._td)("Cancel replying to a message")
  }],
  [Categories.CALLS]: [{
    keybinds: [{
      modifiers: [CMD_OR_CTRL],
      key: _Keyboard.Key.D
    }],
    description: (0, _languageHandler._td)("Toggle microphone mute")
  }, {
    keybinds: [{
      modifiers: [CMD_OR_CTRL],
      key: _Keyboard.Key.E
    }],
    description: (0, _languageHandler._td)("Toggle video on/off")
  }],
  [Categories.ROOM]: [{
    keybinds: [{
      key: _Keyboard.Key.PAGE_UP
    }, {
      key: _Keyboard.Key.PAGE_DOWN
    }],
    description: (0, _languageHandler._td)("Scroll up/down in the timeline")
  }, {
    keybinds: [{
      key: _Keyboard.Key.ESCAPE
    }],
    description: (0, _languageHandler._td)("Dismiss read marker and jump to bottom")
  }, {
    keybinds: [{
      modifiers: [Modifiers.SHIFT],
      key: _Keyboard.Key.PAGE_UP
    }],
    description: (0, _languageHandler._td)("Jump to oldest unread message")
  }, {
    keybinds: [{
      modifiers: [CMD_OR_CTRL, Modifiers.SHIFT],
      key: _Keyboard.Key.U
    }],
    description: (0, _languageHandler._td)("Upload a file")
  }],
  [Categories.ROOM_LIST]: [{
    keybinds: [{
      modifiers: [CMD_OR_CTRL],
      key: _Keyboard.Key.K
    }],
    description: (0, _languageHandler._td)("Jump to room search")
  }, {
    keybinds: [{
      key: _Keyboard.Key.ARROW_UP
    }, {
      key: _Keyboard.Key.ARROW_DOWN
    }],
    description: (0, _languageHandler._td)("Navigate up/down in the room list")
  }, {
    keybinds: [{
      key: _Keyboard.Key.ENTER
    }],
    description: (0, _languageHandler._td)("Select room from the room list")
  }, {
    keybinds: [{
      key: _Keyboard.Key.ARROW_LEFT
    }],
    description: (0, _languageHandler._td)("Collapse room list section")
  }, {
    keybinds: [{
      key: _Keyboard.Key.ARROW_RIGHT
    }],
    description: (0, _languageHandler._td)("Expand room list section")
  }, {
    keybinds: [{
      key: _Keyboard.Key.ESCAPE
    }],
    description: (0, _languageHandler._td)("Clear room list filter field")
  }],
  [Categories.NAVIGATION]: [{
    keybinds: [{
      modifiers: [Modifiers.ALT, Modifiers.SHIFT],
      key: _Keyboard.Key.ARROW_UP
    }, {
      modifiers: [Modifiers.ALT, Modifiers.SHIFT],
      key: _Keyboard.Key.ARROW_DOWN
    }],
    description: (0, _languageHandler._td)("Previous/next unread room or DM")
  }, {
    keybinds: [{
      modifiers: [Modifiers.ALT],
      key: _Keyboard.Key.ARROW_UP
    }, {
      modifiers: [Modifiers.ALT],
      key: _Keyboard.Key.ARROW_DOWN
    }],
    description: (0, _languageHandler._td)("Previous/next room or DM")
  }, {
    keybinds: [{
      modifiers: [CMD_OR_CTRL],
      key: _Keyboard.Key.BACKTICK
    }],
    description: (0, _languageHandler._td)("Toggle the top left menu")
  }, {
    keybinds: [{
      key: _Keyboard.Key.ESCAPE
    }],
    description: (0, _languageHandler._td)("Close dialog or context menu")
  }, {
    keybinds: [{
      key: _Keyboard.Key.ENTER
    }, {
      key: _Keyboard.Key.SPACE
    }],
    description: (0, _languageHandler._td)("Activate selected button")
  }, {
    keybinds: [{
      modifiers: [CMD_OR_CTRL],
      key: _Keyboard.Key.PERIOD
    }],
    description: (0, _languageHandler._td)("Toggle right panel")
  }, {
    keybinds: [{
      modifiers: [CMD_OR_CTRL],
      key: _Keyboard.Key.SLASH
    }],
    description: (0, _languageHandler._td)("Toggle this dialog")
  }],
  [Categories.AUTOCOMPLETE]: [{
    keybinds: [{
      key: _Keyboard.Key.ARROW_UP
    }, {
      key: _Keyboard.Key.ARROW_DOWN
    }],
    description: (0, _languageHandler._td)("Move autocomplete selection up/down")
  }, {
    keybinds: [{
      key: _Keyboard.Key.ESCAPE
    }],
    description: (0, _languageHandler._td)("Cancel autocomplete")
  }]
};
const categoryOrder = [Categories.COMPOSER, Categories.AUTOCOMPLETE, Categories.ROOM, Categories.ROOM_LIST, Categories.NAVIGATION, Categories.CALLS];
const modifierIcon
/*: Record<string, string>*/
= {
  [Modifiers.COMMAND]: "⌘"
};

if (_Keyboard.isMac) {
  modifierIcon[Modifiers.ALT] = "⌥";
}

const alternateKeyName
/*: Record<string, string>*/
= {
  [_Keyboard.Key.PAGE_UP]: (0, _languageHandler._td)("Page Up"),
  [_Keyboard.Key.PAGE_DOWN]: (0, _languageHandler._td)("Page Down"),
  [_Keyboard.Key.ESCAPE]: (0, _languageHandler._td)("Esc"),
  [_Keyboard.Key.ENTER]: (0, _languageHandler._td)("Enter"),
  [_Keyboard.Key.SPACE]: (0, _languageHandler._td)("Space"),
  [_Keyboard.Key.HOME]: (0, _languageHandler._td)("Home"),
  [_Keyboard.Key.END]: (0, _languageHandler._td)("End")
};
const keyIcon
/*: Record<string, string>*/
= {
  [_Keyboard.Key.ARROW_UP]: "↑",
  [_Keyboard.Key.ARROW_DOWN]: "↓",
  [_Keyboard.Key.ARROW_LEFT]: "←",
  [_Keyboard.Key.ARROW_RIGHT]: "→"
};

const Shortcut
/*: React.FC<{
    shortcut: IShortcut;
}>*/
= ({
  shortcut
}) => {
  const classes = (0, _classnames.default)({
    "mx_KeyboardShortcutsDialog_inline": shortcut.keybinds.every(k => !k.modifiers || k.modifiers.length === 0)
  });
  return /*#__PURE__*/React.createElement("div", {
    className: classes
  }, /*#__PURE__*/React.createElement("h5", null, (0, _languageHandler._t)(shortcut.description)), shortcut.keybinds.map(s => {
    let text = s.key;

    if (alternateKeyName[s.key]) {
      text = (0, _languageHandler._t)(alternateKeyName[s.key]);
    } else if (keyIcon[s.key]) {
      text = keyIcon[s.key];
    }

    return /*#__PURE__*/React.createElement("div", {
      key: s.key
    }, s.modifiers && s.modifiers.map(m => {
      return /*#__PURE__*/React.createElement(React.Fragment, {
        key: m
      }, /*#__PURE__*/React.createElement("kbd", null, modifierIcon[m] || (0, _languageHandler._t)(m)), "+");
    }), /*#__PURE__*/React.createElement("kbd", null, text));
  }));
};

let activeModal
/*: IModal*/
= null;

const toggleDialog = () => {
  if (activeModal) {
    activeModal.close();
    activeModal = null;
    return;
  }

  const sections = categoryOrder.map(category => {
    const list = shortcuts[category];
    return /*#__PURE__*/React.createElement("div", {
      className: "mx_KeyboardShortcutsDialog_category",
      key: category
    }, /*#__PURE__*/React.createElement("h3", null, (0, _languageHandler._t)(category)), /*#__PURE__*/React.createElement("div", null, list.map(shortcut => /*#__PURE__*/React.createElement(Shortcut, {
      key: shortcut.description,
      shortcut: shortcut
    }))));
  });
  const InfoDialog = sdk.getComponent('dialogs.InfoDialog');
  activeModal = _Modal.default.createTrackedDialog("Keyboard Shortcuts", "", InfoDialog, {
    className: "mx_KeyboardShortcutsDialog",
    title: (0, _languageHandler._t)("Keyboard Shortcuts"),
    description: sections,
    hasCloseButton: true,
    onKeyDown: ev => {
      if (ev.ctrlKey && !ev.shiftKey && !ev.altKey && !ev.metaKey && ev.key === _Keyboard.Key.SLASH) {
        // Ctrl + /
        ev.stopPropagation();
        activeModal.close();
      }
    },
    onFinished: () => {
      activeModal = null;
    }
  });
};

exports.toggleDialog = toggleDialog;

const registerShortcut = (category
/*: Categories*/
, defn
/*: IShortcut*/
) => {
  shortcuts[category].push(defn);
};

exports.registerShortcut = registerShortcut;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9hY2Nlc3NpYmlsaXR5L0tleWJvYXJkU2hvcnRjdXRzLnRzeCJdLCJuYW1lcyI6WyJDYXRlZ29yaWVzIiwiTW9kaWZpZXJzIiwiQ01EX09SX0NUUkwiLCJpc01hYyIsIkNPTU1BTkQiLCJDT05UUk9MIiwic2hvcnRjdXRzIiwiQ09NUE9TRVIiLCJrZXliaW5kcyIsIm1vZGlmaWVycyIsImtleSIsIktleSIsIkIiLCJkZXNjcmlwdGlvbiIsIkkiLCJHUkVBVEVSX1RIQU4iLCJTSElGVCIsIkVOVEVSIiwiQVJST1dfVVAiLCJBUlJPV19ET1dOIiwiSE9NRSIsIkVORCIsIkFMVCIsIkVTQ0FQRSIsIkNBTExTIiwiRCIsIkUiLCJST09NIiwiUEFHRV9VUCIsIlBBR0VfRE9XTiIsIlUiLCJST09NX0xJU1QiLCJLIiwiQVJST1dfTEVGVCIsIkFSUk9XX1JJR0hUIiwiTkFWSUdBVElPTiIsIkJBQ0tUSUNLIiwiU1BBQ0UiLCJQRVJJT0QiLCJTTEFTSCIsIkFVVE9DT01QTEVURSIsImNhdGVnb3J5T3JkZXIiLCJtb2RpZmllckljb24iLCJhbHRlcm5hdGVLZXlOYW1lIiwia2V5SWNvbiIsIlNob3J0Y3V0Iiwic2hvcnRjdXQiLCJjbGFzc2VzIiwiZXZlcnkiLCJrIiwibGVuZ3RoIiwibWFwIiwicyIsInRleHQiLCJtIiwiYWN0aXZlTW9kYWwiLCJ0b2dnbGVEaWFsb2ciLCJjbG9zZSIsInNlY3Rpb25zIiwiY2F0ZWdvcnkiLCJsaXN0IiwiSW5mb0RpYWxvZyIsInNkayIsImdldENvbXBvbmVudCIsIk1vZGFsIiwiY3JlYXRlVHJhY2tlZERpYWxvZyIsImNsYXNzTmFtZSIsInRpdGxlIiwiaGFzQ2xvc2VCdXR0b24iLCJvbktleURvd24iLCJldiIsImN0cmxLZXkiLCJzaGlmdEtleSIsImFsdEtleSIsIm1ldGFLZXkiLCJzdG9wUHJvcGFnYXRpb24iLCJvbkZpbmlzaGVkIiwicmVnaXN0ZXJTaG9ydGN1dCIsImRlZm4iLCJwdXNoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQWdCQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUF0QkE7Ozs7Ozs7Ozs7Ozs7OztBQXdCQTtBQUNBLDBCQUFJLFlBQUo7QUFDQSwwQkFBSSxPQUFKO0FBQ0EsMEJBQUksVUFBSjtBQUNBLDBCQUFJLFdBQUo7QUFDQSwwQkFBSSxjQUFKO0lBRVlBLFUsRUFTWjs7OztXQVRZQSxVO0FBQUFBLEVBQUFBLFU7QUFBQUEsRUFBQUEsVTtBQUFBQSxFQUFBQSxVO0FBQUFBLEVBQUFBLFU7QUFBQUEsRUFBQUEsVTtBQUFBQSxFQUFBQSxVO0dBQUFBLFUsMEJBQUFBLFU7O0FBVVosMEJBQUksS0FBSjtBQUNBLDBCQUFJLFFBQUo7QUFDQSwwQkFBSSxPQUFKO0FBQ0EsMEJBQUksT0FBSjtBQUNBLDBCQUFJLE1BQUo7SUFFWUMsUyxFQVVaOzs7O1dBVllBLFM7QUFBQUEsRUFBQUEsUztBQUFBQSxFQUFBQSxTO0FBQUFBLEVBQUFBLFM7QUFBQUEsRUFBQUEsUztBQUFBQSxFQUFBQSxTO0FBQUFBLEVBQUFBLFM7R0FBQUEsUyx5QkFBQUEsUzs7QUFXTCxNQUFNQyxXQUFXLEdBQUdDLGtCQUFRRixTQUFTLENBQUNHLE9BQWxCLEdBQTRCSCxTQUFTLENBQUNJLE9BQTFEOztBQVlQLE1BQU1DO0FBQTBDO0FBQUEsRUFBRztBQUMvQyxHQUFDTixVQUFVLENBQUNPLFFBQVosR0FBdUIsQ0FDbkI7QUFDSUMsSUFBQUEsUUFBUSxFQUFFLENBQUM7QUFDUEMsTUFBQUEsU0FBUyxFQUFFLENBQUNQLFdBQUQsQ0FESjtBQUVQUSxNQUFBQSxHQUFHLEVBQUVDLGNBQUlDO0FBRkYsS0FBRCxDQURkO0FBS0lDLElBQUFBLFdBQVcsRUFBRSwwQkFBSSxhQUFKO0FBTGpCLEdBRG1CLEVBT2hCO0FBQ0NMLElBQUFBLFFBQVEsRUFBRSxDQUFDO0FBQ1BDLE1BQUFBLFNBQVMsRUFBRSxDQUFDUCxXQUFELENBREo7QUFFUFEsTUFBQUEsR0FBRyxFQUFFQyxjQUFJRztBQUZGLEtBQUQsQ0FEWDtBQUtDRCxJQUFBQSxXQUFXLEVBQUUsMEJBQUksZ0JBQUo7QUFMZCxHQVBnQixFQWFoQjtBQUNDTCxJQUFBQSxRQUFRLEVBQUUsQ0FBQztBQUNQQyxNQUFBQSxTQUFTLEVBQUUsQ0FBQ1AsV0FBRCxDQURKO0FBRVBRLE1BQUFBLEdBQUcsRUFBRUMsY0FBSUk7QUFGRixLQUFELENBRFg7QUFLQ0YsSUFBQUEsV0FBVyxFQUFFLDBCQUFJLGNBQUo7QUFMZCxHQWJnQixFQW1CaEI7QUFDQ0wsSUFBQUEsUUFBUSxFQUFFLENBQUM7QUFDUEMsTUFBQUEsU0FBUyxFQUFFLENBQUNSLFNBQVMsQ0FBQ2UsS0FBWCxDQURKO0FBRVBOLE1BQUFBLEdBQUcsRUFBRUMsY0FBSU07QUFGRixLQUFELENBRFg7QUFLQ0osSUFBQUEsV0FBVyxFQUFFLDBCQUFJLFVBQUo7QUFMZCxHQW5CZ0IsRUF5QmhCO0FBQ0NMLElBQUFBLFFBQVEsRUFBRSxDQUFDO0FBQ1BFLE1BQUFBLEdBQUcsRUFBRUMsY0FBSU87QUFERixLQUFELEVBRVA7QUFDQ1IsTUFBQUEsR0FBRyxFQUFFQyxjQUFJUTtBQURWLEtBRk8sQ0FEWDtBQU1DTixJQUFBQSxXQUFXLEVBQUUsMEJBQUksa0NBQUo7QUFOZCxHQXpCZ0IsRUFnQ2hCO0FBQ0NMLElBQUFBLFFBQVEsRUFBRSxDQUFDO0FBQ1BDLE1BQUFBLFNBQVMsRUFBRSxDQUFDUCxXQUFELENBREo7QUFFUFEsTUFBQUEsR0FBRyxFQUFFQyxjQUFJUztBQUZGLEtBQUQsRUFHUDtBQUNDWCxNQUFBQSxTQUFTLEVBQUUsQ0FBQ1AsV0FBRCxDQURaO0FBRUNRLE1BQUFBLEdBQUcsRUFBRUMsY0FBSVU7QUFGVixLQUhPLENBRFg7QUFRQ1IsSUFBQUEsV0FBVyxFQUFFLDBCQUFJLG1DQUFKO0FBUmQsR0FoQ2dCLEVBeUNoQjtBQUNDTCxJQUFBQSxRQUFRLEVBQUUsQ0FBQztBQUNQQyxNQUFBQSxTQUFTLEVBQUUsQ0FBQ1IsU0FBUyxDQUFDSSxPQUFYLEVBQW9CSixTQUFTLENBQUNxQixHQUE5QixDQURKO0FBRVBaLE1BQUFBLEdBQUcsRUFBRUMsY0FBSU87QUFGRixLQUFELEVBR1A7QUFDQ1QsTUFBQUEsU0FBUyxFQUFFLENBQUNSLFNBQVMsQ0FBQ0ksT0FBWCxFQUFvQkosU0FBUyxDQUFDcUIsR0FBOUIsQ0FEWjtBQUVDWixNQUFBQSxHQUFHLEVBQUVDLGNBQUlRO0FBRlYsS0FITyxDQURYO0FBUUNOLElBQUFBLFdBQVcsRUFBRSwwQkFBSSwyQkFBSjtBQVJkLEdBekNnQixFQWtEaEI7QUFDQ0wsSUFBQUEsUUFBUSxFQUFFLENBQUM7QUFDUEUsTUFBQUEsR0FBRyxFQUFFQyxjQUFJWTtBQURGLEtBQUQsQ0FEWDtBQUlDVixJQUFBQSxXQUFXLEVBQUUsMEJBQUksOEJBQUo7QUFKZCxHQWxEZ0IsQ0FEd0I7QUEyRC9DLEdBQUNiLFVBQVUsQ0FBQ3dCLEtBQVosR0FBb0IsQ0FDaEI7QUFDSWhCLElBQUFBLFFBQVEsRUFBRSxDQUFDO0FBQ1BDLE1BQUFBLFNBQVMsRUFBRSxDQUFDUCxXQUFELENBREo7QUFFUFEsTUFBQUEsR0FBRyxFQUFFQyxjQUFJYztBQUZGLEtBQUQsQ0FEZDtBQUtJWixJQUFBQSxXQUFXLEVBQUUsMEJBQUksd0JBQUo7QUFMakIsR0FEZ0IsRUFPYjtBQUNDTCxJQUFBQSxRQUFRLEVBQUUsQ0FBQztBQUNQQyxNQUFBQSxTQUFTLEVBQUUsQ0FBQ1AsV0FBRCxDQURKO0FBRVBRLE1BQUFBLEdBQUcsRUFBRUMsY0FBSWU7QUFGRixLQUFELENBRFg7QUFLQ2IsSUFBQUEsV0FBVyxFQUFFLDBCQUFJLHFCQUFKO0FBTGQsR0FQYSxDQTNEMkI7QUEyRS9DLEdBQUNiLFVBQVUsQ0FBQzJCLElBQVosR0FBbUIsQ0FDZjtBQUNJbkIsSUFBQUEsUUFBUSxFQUFFLENBQUM7QUFDUEUsTUFBQUEsR0FBRyxFQUFFQyxjQUFJaUI7QUFERixLQUFELEVBRVA7QUFDQ2xCLE1BQUFBLEdBQUcsRUFBRUMsY0FBSWtCO0FBRFYsS0FGTyxDQURkO0FBTUloQixJQUFBQSxXQUFXLEVBQUUsMEJBQUksZ0NBQUo7QUFOakIsR0FEZSxFQVFaO0FBQ0NMLElBQUFBLFFBQVEsRUFBRSxDQUFDO0FBQ1BFLE1BQUFBLEdBQUcsRUFBRUMsY0FBSVk7QUFERixLQUFELENBRFg7QUFJQ1YsSUFBQUEsV0FBVyxFQUFFLDBCQUFJLHdDQUFKO0FBSmQsR0FSWSxFQWFaO0FBQ0NMLElBQUFBLFFBQVEsRUFBRSxDQUFDO0FBQ1BDLE1BQUFBLFNBQVMsRUFBRSxDQUFDUixTQUFTLENBQUNlLEtBQVgsQ0FESjtBQUVQTixNQUFBQSxHQUFHLEVBQUVDLGNBQUlpQjtBQUZGLEtBQUQsQ0FEWDtBQUtLZixJQUFBQSxXQUFXLEVBQUUsMEJBQUksK0JBQUo7QUFMbEIsR0FiWSxFQW1CWjtBQUNDTCxJQUFBQSxRQUFRLEVBQUUsQ0FBQztBQUNQQyxNQUFBQSxTQUFTLEVBQUUsQ0FBQ1AsV0FBRCxFQUFjRCxTQUFTLENBQUNlLEtBQXhCLENBREo7QUFFUE4sTUFBQUEsR0FBRyxFQUFFQyxjQUFJbUI7QUFGRixLQUFELENBRFg7QUFLQ2pCLElBQUFBLFdBQVcsRUFBRSwwQkFBSSxlQUFKO0FBTGQsR0FuQlksQ0EzRTRCO0FBdUcvQyxHQUFDYixVQUFVLENBQUMrQixTQUFaLEdBQXdCLENBQ3BCO0FBQ0l2QixJQUFBQSxRQUFRLEVBQUUsQ0FBQztBQUNQQyxNQUFBQSxTQUFTLEVBQUUsQ0FBQ1AsV0FBRCxDQURKO0FBRVBRLE1BQUFBLEdBQUcsRUFBRUMsY0FBSXFCO0FBRkYsS0FBRCxDQURkO0FBS0luQixJQUFBQSxXQUFXLEVBQUUsMEJBQUkscUJBQUo7QUFMakIsR0FEb0IsRUFPakI7QUFDQ0wsSUFBQUEsUUFBUSxFQUFFLENBQUM7QUFDUEUsTUFBQUEsR0FBRyxFQUFFQyxjQUFJTztBQURGLEtBQUQsRUFFUDtBQUNDUixNQUFBQSxHQUFHLEVBQUVDLGNBQUlRO0FBRFYsS0FGTyxDQURYO0FBTUNOLElBQUFBLFdBQVcsRUFBRSwwQkFBSSxtQ0FBSjtBQU5kLEdBUGlCLEVBY2pCO0FBQ0NMLElBQUFBLFFBQVEsRUFBRSxDQUFDO0FBQ1BFLE1BQUFBLEdBQUcsRUFBRUMsY0FBSU07QUFERixLQUFELENBRFg7QUFJQ0osSUFBQUEsV0FBVyxFQUFFLDBCQUFJLGdDQUFKO0FBSmQsR0FkaUIsRUFtQmpCO0FBQ0NMLElBQUFBLFFBQVEsRUFBRSxDQUFDO0FBQ1BFLE1BQUFBLEdBQUcsRUFBRUMsY0FBSXNCO0FBREYsS0FBRCxDQURYO0FBSUNwQixJQUFBQSxXQUFXLEVBQUUsMEJBQUksNEJBQUo7QUFKZCxHQW5CaUIsRUF3QmpCO0FBQ0NMLElBQUFBLFFBQVEsRUFBRSxDQUFDO0FBQ1BFLE1BQUFBLEdBQUcsRUFBRUMsY0FBSXVCO0FBREYsS0FBRCxDQURYO0FBSUNyQixJQUFBQSxXQUFXLEVBQUUsMEJBQUksMEJBQUo7QUFKZCxHQXhCaUIsRUE2QmpCO0FBQ0NMLElBQUFBLFFBQVEsRUFBRSxDQUFDO0FBQ1BFLE1BQUFBLEdBQUcsRUFBRUMsY0FBSVk7QUFERixLQUFELENBRFg7QUFJQ1YsSUFBQUEsV0FBVyxFQUFFLDBCQUFJLDhCQUFKO0FBSmQsR0E3QmlCLENBdkd1QjtBQTRJL0MsR0FBQ2IsVUFBVSxDQUFDbUMsVUFBWixHQUF5QixDQUNyQjtBQUNJM0IsSUFBQUEsUUFBUSxFQUFFLENBQUM7QUFDUEMsTUFBQUEsU0FBUyxFQUFFLENBQUNSLFNBQVMsQ0FBQ3FCLEdBQVgsRUFBZ0JyQixTQUFTLENBQUNlLEtBQTFCLENBREo7QUFFUE4sTUFBQUEsR0FBRyxFQUFFQyxjQUFJTztBQUZGLEtBQUQsRUFHUDtBQUNDVCxNQUFBQSxTQUFTLEVBQUUsQ0FBQ1IsU0FBUyxDQUFDcUIsR0FBWCxFQUFnQnJCLFNBQVMsQ0FBQ2UsS0FBMUIsQ0FEWjtBQUVDTixNQUFBQSxHQUFHLEVBQUVDLGNBQUlRO0FBRlYsS0FITyxDQURkO0FBUUlOLElBQUFBLFdBQVcsRUFBRSwwQkFBSSxpQ0FBSjtBQVJqQixHQURxQixFQVVsQjtBQUNDTCxJQUFBQSxRQUFRLEVBQUUsQ0FBQztBQUNQQyxNQUFBQSxTQUFTLEVBQUUsQ0FBQ1IsU0FBUyxDQUFDcUIsR0FBWCxDQURKO0FBRVBaLE1BQUFBLEdBQUcsRUFBRUMsY0FBSU87QUFGRixLQUFELEVBR1A7QUFDQ1QsTUFBQUEsU0FBUyxFQUFFLENBQUNSLFNBQVMsQ0FBQ3FCLEdBQVgsQ0FEWjtBQUVDWixNQUFBQSxHQUFHLEVBQUVDLGNBQUlRO0FBRlYsS0FITyxDQURYO0FBUUNOLElBQUFBLFdBQVcsRUFBRSwwQkFBSSwwQkFBSjtBQVJkLEdBVmtCLEVBbUJsQjtBQUNDTCxJQUFBQSxRQUFRLEVBQUUsQ0FBQztBQUNQQyxNQUFBQSxTQUFTLEVBQUUsQ0FBQ1AsV0FBRCxDQURKO0FBRVBRLE1BQUFBLEdBQUcsRUFBRUMsY0FBSXlCO0FBRkYsS0FBRCxDQURYO0FBS0N2QixJQUFBQSxXQUFXLEVBQUUsMEJBQUksMEJBQUo7QUFMZCxHQW5Ca0IsRUF5QmxCO0FBQ0NMLElBQUFBLFFBQVEsRUFBRSxDQUFDO0FBQ1BFLE1BQUFBLEdBQUcsRUFBRUMsY0FBSVk7QUFERixLQUFELENBRFg7QUFJQ1YsSUFBQUEsV0FBVyxFQUFFLDBCQUFJLDhCQUFKO0FBSmQsR0F6QmtCLEVBOEJsQjtBQUNDTCxJQUFBQSxRQUFRLEVBQUUsQ0FBQztBQUNQRSxNQUFBQSxHQUFHLEVBQUVDLGNBQUlNO0FBREYsS0FBRCxFQUVQO0FBQ0NQLE1BQUFBLEdBQUcsRUFBRUMsY0FBSTBCO0FBRFYsS0FGTyxDQURYO0FBTUN4QixJQUFBQSxXQUFXLEVBQUUsMEJBQUksMEJBQUo7QUFOZCxHQTlCa0IsRUFxQ2xCO0FBQ0NMLElBQUFBLFFBQVEsRUFBRSxDQUFDO0FBQ1BDLE1BQUFBLFNBQVMsRUFBRSxDQUFDUCxXQUFELENBREo7QUFFUFEsTUFBQUEsR0FBRyxFQUFFQyxjQUFJMkI7QUFGRixLQUFELENBRFg7QUFLQ3pCLElBQUFBLFdBQVcsRUFBRSwwQkFBSSxvQkFBSjtBQUxkLEdBckNrQixFQTJDbEI7QUFDQ0wsSUFBQUEsUUFBUSxFQUFFLENBQUM7QUFDUEMsTUFBQUEsU0FBUyxFQUFFLENBQUNQLFdBQUQsQ0FESjtBQUVQUSxNQUFBQSxHQUFHLEVBQUVDLGNBQUk0QjtBQUZGLEtBQUQsQ0FEWDtBQUtDMUIsSUFBQUEsV0FBVyxFQUFFLDBCQUFJLG9CQUFKO0FBTGQsR0EzQ2tCLENBNUlzQjtBQWdNL0MsR0FBQ2IsVUFBVSxDQUFDd0MsWUFBWixHQUEyQixDQUN2QjtBQUNJaEMsSUFBQUEsUUFBUSxFQUFFLENBQUM7QUFDUEUsTUFBQUEsR0FBRyxFQUFFQyxjQUFJTztBQURGLEtBQUQsRUFFUDtBQUNDUixNQUFBQSxHQUFHLEVBQUVDLGNBQUlRO0FBRFYsS0FGTyxDQURkO0FBTUlOLElBQUFBLFdBQVcsRUFBRSwwQkFBSSxxQ0FBSjtBQU5qQixHQUR1QixFQVFwQjtBQUNDTCxJQUFBQSxRQUFRLEVBQUUsQ0FBQztBQUNQRSxNQUFBQSxHQUFHLEVBQUVDLGNBQUlZO0FBREYsS0FBRCxDQURYO0FBSUNWLElBQUFBLFdBQVcsRUFBRSwwQkFBSSxxQkFBSjtBQUpkLEdBUm9CO0FBaE1vQixDQUFuRDtBQWlOQSxNQUFNNEIsYUFBYSxHQUFHLENBQ2xCekMsVUFBVSxDQUFDTyxRQURPLEVBRWxCUCxVQUFVLENBQUN3QyxZQUZPLEVBR2xCeEMsVUFBVSxDQUFDMkIsSUFITyxFQUlsQjNCLFVBQVUsQ0FBQytCLFNBSk8sRUFLbEIvQixVQUFVLENBQUNtQyxVQUxPLEVBTWxCbkMsVUFBVSxDQUFDd0IsS0FOTyxDQUF0QjtBQWNBLE1BQU1rQjtBQUFvQztBQUFBLEVBQUc7QUFDekMsR0FBQ3pDLFNBQVMsQ0FBQ0csT0FBWCxHQUFxQjtBQURvQixDQUE3Qzs7QUFJQSxJQUFJRCxlQUFKLEVBQVc7QUFDUHVDLEVBQUFBLFlBQVksQ0FBQ3pDLFNBQVMsQ0FBQ3FCLEdBQVgsQ0FBWixHQUE4QixHQUE5QjtBQUNIOztBQUVELE1BQU1xQjtBQUF3QztBQUFBLEVBQUc7QUFDN0MsR0FBQ2hDLGNBQUlpQixPQUFMLEdBQWUsMEJBQUksU0FBSixDQUQ4QjtBQUU3QyxHQUFDakIsY0FBSWtCLFNBQUwsR0FBaUIsMEJBQUksV0FBSixDQUY0QjtBQUc3QyxHQUFDbEIsY0FBSVksTUFBTCxHQUFjLDBCQUFJLEtBQUosQ0FIK0I7QUFJN0MsR0FBQ1osY0FBSU0sS0FBTCxHQUFhLDBCQUFJLE9BQUosQ0FKZ0M7QUFLN0MsR0FBQ04sY0FBSTBCLEtBQUwsR0FBYSwwQkFBSSxPQUFKLENBTGdDO0FBTTdDLEdBQUMxQixjQUFJUyxJQUFMLEdBQVksMEJBQUksTUFBSixDQU5pQztBQU83QyxHQUFDVCxjQUFJVSxHQUFMLEdBQVcsMEJBQUksS0FBSjtBQVBrQyxDQUFqRDtBQVNBLE1BQU11QjtBQUErQjtBQUFBLEVBQUc7QUFDcEMsR0FBQ2pDLGNBQUlPLFFBQUwsR0FBZ0IsR0FEb0I7QUFFcEMsR0FBQ1AsY0FBSVEsVUFBTCxHQUFrQixHQUZrQjtBQUdwQyxHQUFDUixjQUFJc0IsVUFBTCxHQUFrQixHQUhrQjtBQUlwQyxHQUFDdEIsY0FBSXVCLFdBQUwsR0FBbUI7QUFKaUIsQ0FBeEM7O0FBT0EsTUFBTVc7QUFFSjs7O0FBQUEsRUFBRyxDQUFDO0FBQUNDLEVBQUFBO0FBQUQsQ0FBRCxLQUFnQjtBQUNqQixRQUFNQyxPQUFPLEdBQUcseUJBQVc7QUFDdkIseUNBQXFDRCxRQUFRLENBQUN0QyxRQUFULENBQWtCd0MsS0FBbEIsQ0FBd0JDLENBQUMsSUFBSSxDQUFDQSxDQUFDLENBQUN4QyxTQUFILElBQWdCd0MsQ0FBQyxDQUFDeEMsU0FBRixDQUFZeUMsTUFBWixLQUF1QixDQUFwRTtBQURkLEdBQVgsQ0FBaEI7QUFJQSxzQkFBTztBQUFLLElBQUEsU0FBUyxFQUFFSDtBQUFoQixrQkFDSCxnQ0FBTSx5QkFBR0QsUUFBUSxDQUFDakMsV0FBWixDQUFOLENBREcsRUFFRGlDLFFBQVEsQ0FBQ3RDLFFBQVQsQ0FBa0IyQyxHQUFsQixDQUFzQkMsQ0FBQyxJQUFJO0FBQ3pCLFFBQUlDLElBQUksR0FBR0QsQ0FBQyxDQUFDMUMsR0FBYjs7QUFDQSxRQUFJaUMsZ0JBQWdCLENBQUNTLENBQUMsQ0FBQzFDLEdBQUgsQ0FBcEIsRUFBNkI7QUFDekIyQyxNQUFBQSxJQUFJLEdBQUcseUJBQUdWLGdCQUFnQixDQUFDUyxDQUFDLENBQUMxQyxHQUFILENBQW5CLENBQVA7QUFDSCxLQUZELE1BRU8sSUFBSWtDLE9BQU8sQ0FBQ1EsQ0FBQyxDQUFDMUMsR0FBSCxDQUFYLEVBQW9CO0FBQ3ZCMkMsTUFBQUEsSUFBSSxHQUFHVCxPQUFPLENBQUNRLENBQUMsQ0FBQzFDLEdBQUgsQ0FBZDtBQUNIOztBQUVELHdCQUFPO0FBQUssTUFBQSxHQUFHLEVBQUUwQyxDQUFDLENBQUMxQztBQUFaLE9BQ0QwQyxDQUFDLENBQUMzQyxTQUFGLElBQWUyQyxDQUFDLENBQUMzQyxTQUFGLENBQVkwQyxHQUFaLENBQWdCRyxDQUFDLElBQUk7QUFDbEMsMEJBQU8sb0JBQUMsS0FBRCxDQUFPLFFBQVA7QUFBZ0IsUUFBQSxHQUFHLEVBQUVBO0FBQXJCLHNCQUNILGlDQUFPWixZQUFZLENBQUNZLENBQUQsQ0FBWixJQUFtQix5QkFBR0EsQ0FBSCxDQUExQixDQURHLE1BQVA7QUFHSCxLQUpnQixDQURkLGVBTUgsaUNBQU9ELElBQVAsQ0FORyxDQUFQO0FBUUgsR0FoQkMsQ0FGQyxDQUFQO0FBb0JILENBM0JEOztBQTZCQSxJQUFJRTtBQUFtQjtBQUFBLEVBQUcsSUFBMUI7O0FBQ08sTUFBTUMsWUFBWSxHQUFHLE1BQU07QUFDOUIsTUFBSUQsV0FBSixFQUFpQjtBQUNiQSxJQUFBQSxXQUFXLENBQUNFLEtBQVo7QUFDQUYsSUFBQUEsV0FBVyxHQUFHLElBQWQ7QUFDQTtBQUNIOztBQUVELFFBQU1HLFFBQVEsR0FBR2pCLGFBQWEsQ0FBQ1UsR0FBZCxDQUFrQlEsUUFBUSxJQUFJO0FBQzNDLFVBQU1DLElBQUksR0FBR3RELFNBQVMsQ0FBQ3FELFFBQUQsQ0FBdEI7QUFDQSx3QkFBTztBQUFLLE1BQUEsU0FBUyxFQUFDLHFDQUFmO0FBQXFELE1BQUEsR0FBRyxFQUFFQTtBQUExRCxvQkFDSCxnQ0FBSyx5QkFBR0EsUUFBSCxDQUFMLENBREcsZUFFSCxpQ0FBTUMsSUFBSSxDQUFDVCxHQUFMLENBQVNMLFFBQVEsaUJBQUksb0JBQUMsUUFBRDtBQUFVLE1BQUEsR0FBRyxFQUFFQSxRQUFRLENBQUNqQyxXQUF4QjtBQUFxQyxNQUFBLFFBQVEsRUFBRWlDO0FBQS9DLE1BQXJCLENBQU4sQ0FGRyxDQUFQO0FBSUgsR0FOZ0IsQ0FBakI7QUFRQSxRQUFNZSxVQUFVLEdBQUdDLEdBQUcsQ0FBQ0MsWUFBSixDQUFpQixvQkFBakIsQ0FBbkI7QUFDQVIsRUFBQUEsV0FBVyxHQUFHUyxlQUFNQyxtQkFBTixDQUEwQixvQkFBMUIsRUFBZ0QsRUFBaEQsRUFBb0RKLFVBQXBELEVBQWdFO0FBQzFFSyxJQUFBQSxTQUFTLEVBQUUsNEJBRCtEO0FBRTFFQyxJQUFBQSxLQUFLLEVBQUUseUJBQUcsb0JBQUgsQ0FGbUU7QUFHMUV0RCxJQUFBQSxXQUFXLEVBQUU2QyxRQUg2RDtBQUkxRVUsSUFBQUEsY0FBYyxFQUFFLElBSjBEO0FBSzFFQyxJQUFBQSxTQUFTLEVBQUdDLEVBQUQsSUFBUTtBQUNmLFVBQUlBLEVBQUUsQ0FBQ0MsT0FBSCxJQUFjLENBQUNELEVBQUUsQ0FBQ0UsUUFBbEIsSUFBOEIsQ0FBQ0YsRUFBRSxDQUFDRyxNQUFsQyxJQUE0QyxDQUFDSCxFQUFFLENBQUNJLE9BQWhELElBQTJESixFQUFFLENBQUM1RCxHQUFILEtBQVdDLGNBQUk0QixLQUE5RSxFQUFxRjtBQUFFO0FBQ25GK0IsUUFBQUEsRUFBRSxDQUFDSyxlQUFIO0FBQ0FwQixRQUFBQSxXQUFXLENBQUNFLEtBQVo7QUFDSDtBQUNKLEtBVnlFO0FBVzFFbUIsSUFBQUEsVUFBVSxFQUFFLE1BQU07QUFDZHJCLE1BQUFBLFdBQVcsR0FBRyxJQUFkO0FBQ0g7QUFieUUsR0FBaEUsQ0FBZDtBQWVILENBL0JNOzs7O0FBaUNBLE1BQU1zQixnQkFBZ0IsR0FBRyxDQUFDbEI7QUFBRDtBQUFBLEVBQXVCbUI7QUFBdkI7QUFBQSxLQUEyQztBQUN2RXhFLEVBQUFBLFNBQVMsQ0FBQ3FELFFBQUQsQ0FBVCxDQUFvQm9CLElBQXBCLENBQXlCRCxJQUF6QjtBQUNILENBRk0iLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IDIwMjAgVGhlIE1hdHJpeC5vcmcgRm91bmRhdGlvbiBDLkkuQy5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gXCJjbGFzc25hbWVzXCI7XG5cbmltcG9ydCAqIGFzIHNkayBmcm9tIFwiLi4vaW5kZXhcIjtcbmltcG9ydCBNb2RhbCBmcm9tIFwiLi4vTW9kYWxcIjtcbmltcG9ydCB7IF90LCBfdGQgfSBmcm9tIFwiLi4vbGFuZ3VhZ2VIYW5kbGVyXCI7XG5pbXBvcnQge2lzTWFjLCBLZXl9IGZyb20gXCIuLi9LZXlib2FyZFwiO1xuXG4vLyBUUzogb25jZSBsYW5ndWFnZUhhbmRsZXIgaXMgVFMgd2UgY2FuIHByb2JhYmx5IGlubGluZSB0aGlzIGludG8gdGhlIGVudW1cbl90ZChcIk5hdmlnYXRpb25cIik7XG5fdGQoXCJDYWxsc1wiKTtcbl90ZChcIkNvbXBvc2VyXCIpO1xuX3RkKFwiUm9vbSBMaXN0XCIpO1xuX3RkKFwiQXV0b2NvbXBsZXRlXCIpO1xuXG5leHBvcnQgZW51bSBDYXRlZ29yaWVzIHtcbiAgICBOQVZJR0FUSU9OID0gXCJOYXZpZ2F0aW9uXCIsXG4gICAgQ0FMTFMgPSBcIkNhbGxzXCIsXG4gICAgQ09NUE9TRVIgPSBcIkNvbXBvc2VyXCIsXG4gICAgUk9PTV9MSVNUID0gXCJSb29tIExpc3RcIixcbiAgICBST09NID0gXCJSb29tXCIsXG4gICAgQVVUT0NPTVBMRVRFID0gXCJBdXRvY29tcGxldGVcIixcbn1cblxuLy8gVFM6IG9uY2UgbGFuZ3VhZ2VIYW5kbGVyIGlzIFRTIHdlIGNhbiBwcm9iYWJseSBpbmxpbmUgdGhpcyBpbnRvIHRoZSBlbnVtXG5fdGQoXCJBbHRcIik7XG5fdGQoXCJBbHQgR3JcIik7XG5fdGQoXCJTaGlmdFwiKTtcbl90ZChcIlN1cGVyXCIpO1xuX3RkKFwiQ3RybFwiKTtcblxuZXhwb3J0IGVudW0gTW9kaWZpZXJzIHtcbiAgICBBTFQgPSBcIkFsdFwiLCAvLyBPcHRpb24gb24gTWFjIGFuZCBkaXNwbGF5ZWQgYXMgYW4gSWNvblxuICAgIEFMVF9HUiA9IFwiQWx0IEdyXCIsXG4gICAgU0hJRlQgPSBcIlNoaWZ0XCIsXG4gICAgU1VQRVIgPSBcIlN1cGVyXCIsIC8vIHNob3VsZCB0aGlzIGJlIFwiV2luZG93c1wiP1xuICAgIC8vIEluc3RlYWQgb2YgdXNpbmcgYmVsb3csIGNvbnNpZGVyIENNRF9PUl9DVFJMXG4gICAgQ09NTUFORCA9IFwiQ29tbWFuZFwiLCAvLyBUaGlzIGdldHMgZGlzcGxheWVkIGFzIGFuIEljb25cbiAgICBDT05UUk9MID0gXCJDdHJsXCIsXG59XG5cbi8vIE1ldGEtbW9kaWZpZXI6IGlzTWFjID8gQ01EIDogQ09OVFJPTFxuZXhwb3J0IGNvbnN0IENNRF9PUl9DVFJMID0gaXNNYWMgPyBNb2RpZmllcnMuQ09NTUFORCA6IE1vZGlmaWVycy5DT05UUk9MO1xuXG5pbnRlcmZhY2UgSUtleWJpbmQge1xuICAgIG1vZGlmaWVycz86IE1vZGlmaWVyc1tdO1xuICAgIGtleTogc3RyaW5nOyAvLyBUUzogZml4IHRoaXMgb25jZSBLZXkgaXMgYW4gZW51bVxufVxuXG5pbnRlcmZhY2UgSVNob3J0Y3V0IHtcbiAgICBrZXliaW5kczogSUtleWJpbmRbXTtcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xufVxuXG5jb25zdCBzaG9ydGN1dHM6IFJlY29yZDxDYXRlZ29yaWVzLCBJU2hvcnRjdXRbXT4gPSB7XG4gICAgW0NhdGVnb3JpZXMuQ09NUE9TRVJdOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIGtleWJpbmRzOiBbe1xuICAgICAgICAgICAgICAgIG1vZGlmaWVyczogW0NNRF9PUl9DVFJMXSxcbiAgICAgICAgICAgICAgICBrZXk6IEtleS5CLFxuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogX3RkKFwiVG9nZ2xlIEJvbGRcIiksXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleWJpbmRzOiBbe1xuICAgICAgICAgICAgICAgIG1vZGlmaWVyczogW0NNRF9PUl9DVFJMXSxcbiAgICAgICAgICAgICAgICBrZXk6IEtleS5JLFxuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogX3RkKFwiVG9nZ2xlIEl0YWxpY3NcIiksXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleWJpbmRzOiBbe1xuICAgICAgICAgICAgICAgIG1vZGlmaWVyczogW0NNRF9PUl9DVFJMXSxcbiAgICAgICAgICAgICAgICBrZXk6IEtleS5HUkVBVEVSX1RIQU4sXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoXCJUb2dnbGUgUXVvdGVcIiksXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleWJpbmRzOiBbe1xuICAgICAgICAgICAgICAgIG1vZGlmaWVyczogW01vZGlmaWVycy5TSElGVF0sXG4gICAgICAgICAgICAgICAga2V5OiBLZXkuRU5URVIsXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoXCJOZXcgbGluZVwiKSxcbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5YmluZHM6IFt7XG4gICAgICAgICAgICAgICAga2V5OiBLZXkuQVJST1dfVVAsXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAga2V5OiBLZXkuQVJST1dfRE9XTixcbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IF90ZChcIk5hdmlnYXRlIHJlY2VudCBtZXNzYWdlcyB0byBlZGl0XCIpLFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXliaW5kczogW3tcbiAgICAgICAgICAgICAgICBtb2RpZmllcnM6IFtDTURfT1JfQ1RSTF0sXG4gICAgICAgICAgICAgICAga2V5OiBLZXkuSE9NRSxcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBtb2RpZmllcnM6IFtDTURfT1JfQ1RSTF0sXG4gICAgICAgICAgICAgICAga2V5OiBLZXkuRU5ELFxuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogX3RkKFwiSnVtcCB0byBzdGFydC9lbmQgb2YgdGhlIGNvbXBvc2VyXCIpLFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXliaW5kczogW3tcbiAgICAgICAgICAgICAgICBtb2RpZmllcnM6IFtNb2RpZmllcnMuQ09OVFJPTCwgTW9kaWZpZXJzLkFMVF0sXG4gICAgICAgICAgICAgICAga2V5OiBLZXkuQVJST1dfVVAsXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbTW9kaWZpZXJzLkNPTlRST0wsIE1vZGlmaWVycy5BTFRdLFxuICAgICAgICAgICAgICAgIGtleTogS2V5LkFSUk9XX0RPV04sXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoXCJOYXZpZ2F0ZSBjb21wb3NlciBoaXN0b3J5XCIpLFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXliaW5kczogW3tcbiAgICAgICAgICAgICAgICBrZXk6IEtleS5FU0NBUEUsXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoXCJDYW5jZWwgcmVwbHlpbmcgdG8gYSBtZXNzYWdlXCIpLFxuICAgICAgICB9LFxuICAgIF0sXG5cbiAgICBbQ2F0ZWdvcmllcy5DQUxMU106IFtcbiAgICAgICAge1xuICAgICAgICAgICAga2V5YmluZHM6IFt7XG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbQ01EX09SX0NUUkxdLFxuICAgICAgICAgICAgICAgIGtleTogS2V5LkQsXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoXCJUb2dnbGUgbWljcm9waG9uZSBtdXRlXCIpLFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXliaW5kczogW3tcbiAgICAgICAgICAgICAgICBtb2RpZmllcnM6IFtDTURfT1JfQ1RSTF0sXG4gICAgICAgICAgICAgICAga2V5OiBLZXkuRSxcbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IF90ZChcIlRvZ2dsZSB2aWRlbyBvbi9vZmZcIiksXG4gICAgICAgIH0sXG4gICAgXSxcblxuICAgIFtDYXRlZ29yaWVzLlJPT01dOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIGtleWJpbmRzOiBbe1xuICAgICAgICAgICAgICAgIGtleTogS2V5LlBBR0VfVVAsXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAga2V5OiBLZXkuUEFHRV9ET1dOLFxuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogX3RkKFwiU2Nyb2xsIHVwL2Rvd24gaW4gdGhlIHRpbWVsaW5lXCIpLFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXliaW5kczogW3tcbiAgICAgICAgICAgICAgICBrZXk6IEtleS5FU0NBUEUsXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoXCJEaXNtaXNzIHJlYWQgbWFya2VyIGFuZCBqdW1wIHRvIGJvdHRvbVwiKSxcbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5YmluZHM6IFt7XG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbTW9kaWZpZXJzLlNISUZUXSxcbiAgICAgICAgICAgICAgICBrZXk6IEtleS5QQUdFX1VQLFxuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IF90ZChcIkp1bXAgdG8gb2xkZXN0IHVucmVhZCBtZXNzYWdlXCIpLFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXliaW5kczogW3tcbiAgICAgICAgICAgICAgICBtb2RpZmllcnM6IFtDTURfT1JfQ1RSTCwgTW9kaWZpZXJzLlNISUZUXSxcbiAgICAgICAgICAgICAgICBrZXk6IEtleS5VLFxuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogX3RkKFwiVXBsb2FkIGEgZmlsZVwiKSxcbiAgICAgICAgfVxuICAgIF0sXG5cbiAgICBbQ2F0ZWdvcmllcy5ST09NX0xJU1RdOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIGtleWJpbmRzOiBbe1xuICAgICAgICAgICAgICAgIG1vZGlmaWVyczogW0NNRF9PUl9DVFJMXSxcbiAgICAgICAgICAgICAgICBrZXk6IEtleS5LLFxuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogX3RkKFwiSnVtcCB0byByb29tIHNlYXJjaFwiKSxcbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5YmluZHM6IFt7XG4gICAgICAgICAgICAgICAga2V5OiBLZXkuQVJST1dfVVAsXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAga2V5OiBLZXkuQVJST1dfRE9XTixcbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IF90ZChcIk5hdmlnYXRlIHVwL2Rvd24gaW4gdGhlIHJvb20gbGlzdFwiKSxcbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5YmluZHM6IFt7XG4gICAgICAgICAgICAgICAga2V5OiBLZXkuRU5URVIsXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoXCJTZWxlY3Qgcm9vbSBmcm9tIHRoZSByb29tIGxpc3RcIiksXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleWJpbmRzOiBbe1xuICAgICAgICAgICAgICAgIGtleTogS2V5LkFSUk9XX0xFRlQsXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoXCJDb2xsYXBzZSByb29tIGxpc3Qgc2VjdGlvblwiKSxcbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5YmluZHM6IFt7XG4gICAgICAgICAgICAgICAga2V5OiBLZXkuQVJST1dfUklHSFQsXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoXCJFeHBhbmQgcm9vbSBsaXN0IHNlY3Rpb25cIiksXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleWJpbmRzOiBbe1xuICAgICAgICAgICAgICAgIGtleTogS2V5LkVTQ0FQRSxcbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IF90ZChcIkNsZWFyIHJvb20gbGlzdCBmaWx0ZXIgZmllbGRcIiksXG4gICAgICAgIH0sXG4gICAgXSxcblxuICAgIFtDYXRlZ29yaWVzLk5BVklHQVRJT05dOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIGtleWJpbmRzOiBbe1xuICAgICAgICAgICAgICAgIG1vZGlmaWVyczogW01vZGlmaWVycy5BTFQsIE1vZGlmaWVycy5TSElGVF0sXG4gICAgICAgICAgICAgICAga2V5OiBLZXkuQVJST1dfVVAsXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbTW9kaWZpZXJzLkFMVCwgTW9kaWZpZXJzLlNISUZUXSxcbiAgICAgICAgICAgICAgICBrZXk6IEtleS5BUlJPV19ET1dOLFxuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogX3RkKFwiUHJldmlvdXMvbmV4dCB1bnJlYWQgcm9vbSBvciBETVwiKSxcbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5YmluZHM6IFt7XG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbTW9kaWZpZXJzLkFMVF0sXG4gICAgICAgICAgICAgICAga2V5OiBLZXkuQVJST1dfVVAsXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbTW9kaWZpZXJzLkFMVF0sXG4gICAgICAgICAgICAgICAga2V5OiBLZXkuQVJST1dfRE9XTixcbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IF90ZChcIlByZXZpb3VzL25leHQgcm9vbSBvciBETVwiKSxcbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5YmluZHM6IFt7XG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbQ01EX09SX0NUUkxdLFxuICAgICAgICAgICAgICAgIGtleTogS2V5LkJBQ0tUSUNLLFxuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogX3RkKFwiVG9nZ2xlIHRoZSB0b3AgbGVmdCBtZW51XCIpLFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXliaW5kczogW3tcbiAgICAgICAgICAgICAgICBrZXk6IEtleS5FU0NBUEUsXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoXCJDbG9zZSBkaWFsb2cgb3IgY29udGV4dCBtZW51XCIpLFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXliaW5kczogW3tcbiAgICAgICAgICAgICAgICBrZXk6IEtleS5FTlRFUixcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBrZXk6IEtleS5TUEFDRSxcbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IF90ZChcIkFjdGl2YXRlIHNlbGVjdGVkIGJ1dHRvblwiKSxcbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5YmluZHM6IFt7XG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbQ01EX09SX0NUUkxdLFxuICAgICAgICAgICAgICAgIGtleTogS2V5LlBFUklPRCxcbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IF90ZChcIlRvZ2dsZSByaWdodCBwYW5lbFwiKSxcbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5YmluZHM6IFt7XG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbQ01EX09SX0NUUkxdLFxuICAgICAgICAgICAgICAgIGtleTogS2V5LlNMQVNILFxuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogX3RkKFwiVG9nZ2xlIHRoaXMgZGlhbG9nXCIpLFxuICAgICAgICB9LFxuICAgIF0sXG5cbiAgICBbQ2F0ZWdvcmllcy5BVVRPQ09NUExFVEVdOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIGtleWJpbmRzOiBbe1xuICAgICAgICAgICAgICAgIGtleTogS2V5LkFSUk9XX1VQLFxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGtleTogS2V5LkFSUk9XX0RPV04sXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoXCJNb3ZlIGF1dG9jb21wbGV0ZSBzZWxlY3Rpb24gdXAvZG93blwiKSxcbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5YmluZHM6IFt7XG4gICAgICAgICAgICAgICAga2V5OiBLZXkuRVNDQVBFLFxuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogX3RkKFwiQ2FuY2VsIGF1dG9jb21wbGV0ZVwiKSxcbiAgICAgICAgfSxcbiAgICBdLFxufTtcblxuY29uc3QgY2F0ZWdvcnlPcmRlciA9IFtcbiAgICBDYXRlZ29yaWVzLkNPTVBPU0VSLFxuICAgIENhdGVnb3JpZXMuQVVUT0NPTVBMRVRFLFxuICAgIENhdGVnb3JpZXMuUk9PTSxcbiAgICBDYXRlZ29yaWVzLlJPT01fTElTVCxcbiAgICBDYXRlZ29yaWVzLk5BVklHQVRJT04sXG4gICAgQ2F0ZWdvcmllcy5DQUxMUyxcbl07XG5cbmludGVyZmFjZSBJTW9kYWwge1xuICAgIGNsb3NlOiAoKSA9PiB2b2lkO1xuICAgIGZpbmlzaGVkOiBQcm9taXNlPGFueVtdPjtcbn1cblxuY29uc3QgbW9kaWZpZXJJY29uOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgIFtNb2RpZmllcnMuQ09NTUFORF06IFwi4oyYXCIsXG59O1xuXG5pZiAoaXNNYWMpIHtcbiAgICBtb2RpZmllckljb25bTW9kaWZpZXJzLkFMVF0gPSBcIuKMpVwiO1xufVxuXG5jb25zdCBhbHRlcm5hdGVLZXlOYW1lOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgIFtLZXkuUEFHRV9VUF06IF90ZChcIlBhZ2UgVXBcIiksXG4gICAgW0tleS5QQUdFX0RPV05dOiBfdGQoXCJQYWdlIERvd25cIiksXG4gICAgW0tleS5FU0NBUEVdOiBfdGQoXCJFc2NcIiksXG4gICAgW0tleS5FTlRFUl06IF90ZChcIkVudGVyXCIpLFxuICAgIFtLZXkuU1BBQ0VdOiBfdGQoXCJTcGFjZVwiKSxcbiAgICBbS2V5LkhPTUVdOiBfdGQoXCJIb21lXCIpLFxuICAgIFtLZXkuRU5EXTogX3RkKFwiRW5kXCIpLFxufTtcbmNvbnN0IGtleUljb246IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgW0tleS5BUlJPV19VUF06IFwi4oaRXCIsXG4gICAgW0tleS5BUlJPV19ET1dOXTogXCLihpNcIixcbiAgICBbS2V5LkFSUk9XX0xFRlRdOiBcIuKGkFwiLFxuICAgIFtLZXkuQVJST1dfUklHSFRdOiBcIuKGklwiLFxufTtcblxuY29uc3QgU2hvcnRjdXQ6IFJlYWN0LkZDPHtcbiAgICBzaG9ydGN1dDogSVNob3J0Y3V0O1xufT4gPSAoe3Nob3J0Y3V0fSkgPT4ge1xuICAgIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKHtcbiAgICAgICAgXCJteF9LZXlib2FyZFNob3J0Y3V0c0RpYWxvZ19pbmxpbmVcIjogc2hvcnRjdXQua2V5YmluZHMuZXZlcnkoayA9PiAhay5tb2RpZmllcnMgfHwgay5tb2RpZmllcnMubGVuZ3RoID09PSAwKSxcbiAgICB9KTtcblxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT17Y2xhc3Nlc30+XG4gICAgICAgIDxoNT57IF90KHNob3J0Y3V0LmRlc2NyaXB0aW9uKSB9PC9oNT5cbiAgICAgICAgeyBzaG9ydGN1dC5rZXliaW5kcy5tYXAocyA9PiB7XG4gICAgICAgICAgICBsZXQgdGV4dCA9IHMua2V5O1xuICAgICAgICAgICAgaWYgKGFsdGVybmF0ZUtleU5hbWVbcy5rZXldKSB7XG4gICAgICAgICAgICAgICAgdGV4dCA9IF90KGFsdGVybmF0ZUtleU5hbWVbcy5rZXldKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5SWNvbltzLmtleV0pIHtcbiAgICAgICAgICAgICAgICB0ZXh0ID0ga2V5SWNvbltzLmtleV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiA8ZGl2IGtleT17cy5rZXl9PlxuICAgICAgICAgICAgICAgIHsgcy5tb2RpZmllcnMgJiYgcy5tb2RpZmllcnMubWFwKG0gPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gPFJlYWN0LkZyYWdtZW50IGtleT17bX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8a2JkPnsgbW9kaWZpZXJJY29uW21dIHx8IF90KG0pIH08L2tiZD4rXG4gICAgICAgICAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+O1xuICAgICAgICAgICAgICAgIH0pIH1cbiAgICAgICAgICAgICAgICA8a2JkPnsgdGV4dCB9PC9rYmQ+XG4gICAgICAgICAgICA8L2Rpdj47XG4gICAgICAgIH0pIH1cbiAgICA8L2Rpdj47XG59O1xuXG5sZXQgYWN0aXZlTW9kYWw6IElNb2RhbCA9IG51bGw7XG5leHBvcnQgY29uc3QgdG9nZ2xlRGlhbG9nID0gKCkgPT4ge1xuICAgIGlmIChhY3RpdmVNb2RhbCkge1xuICAgICAgICBhY3RpdmVNb2RhbC5jbG9zZSgpO1xuICAgICAgICBhY3RpdmVNb2RhbCA9IG51bGw7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzZWN0aW9ucyA9IGNhdGVnb3J5T3JkZXIubWFwKGNhdGVnb3J5ID0+IHtcbiAgICAgICAgY29uc3QgbGlzdCA9IHNob3J0Y3V0c1tjYXRlZ29yeV07XG4gICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cIm14X0tleWJvYXJkU2hvcnRjdXRzRGlhbG9nX2NhdGVnb3J5XCIga2V5PXtjYXRlZ29yeX0+XG4gICAgICAgICAgICA8aDM+e190KGNhdGVnb3J5KX08L2gzPlxuICAgICAgICAgICAgPGRpdj57bGlzdC5tYXAoc2hvcnRjdXQgPT4gPFNob3J0Y3V0IGtleT17c2hvcnRjdXQuZGVzY3JpcHRpb259IHNob3J0Y3V0PXtzaG9ydGN1dH0gLz4pfTwvZGl2PlxuICAgICAgICA8L2Rpdj47XG4gICAgfSk7XG5cbiAgICBjb25zdCBJbmZvRGlhbG9nID0gc2RrLmdldENvbXBvbmVudCgnZGlhbG9ncy5JbmZvRGlhbG9nJyk7XG4gICAgYWN0aXZlTW9kYWwgPSBNb2RhbC5jcmVhdGVUcmFja2VkRGlhbG9nKFwiS2V5Ym9hcmQgU2hvcnRjdXRzXCIsIFwiXCIsIEluZm9EaWFsb2csIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcIm14X0tleWJvYXJkU2hvcnRjdXRzRGlhbG9nXCIsXG4gICAgICAgIHRpdGxlOiBfdChcIktleWJvYXJkIFNob3J0Y3V0c1wiKSxcbiAgICAgICAgZGVzY3JpcHRpb246IHNlY3Rpb25zLFxuICAgICAgICBoYXNDbG9zZUJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgb25LZXlEb3duOiAoZXYpID0+IHtcbiAgICAgICAgICAgIGlmIChldi5jdHJsS2V5ICYmICFldi5zaGlmdEtleSAmJiAhZXYuYWx0S2V5ICYmICFldi5tZXRhS2V5ICYmIGV2LmtleSA9PT0gS2V5LlNMQVNIKSB7IC8vIEN0cmwgKyAvXG4gICAgICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgYWN0aXZlTW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25GaW5pc2hlZDogKCkgPT4ge1xuICAgICAgICAgICAgYWN0aXZlTW9kYWwgPSBudWxsO1xuICAgICAgICB9LFxuICAgIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyU2hvcnRjdXQgPSAoY2F0ZWdvcnk6IENhdGVnb3JpZXMsIGRlZm46IElTaG9ydGN1dCkgPT4ge1xuICAgIHNob3J0Y3V0c1tjYXRlZ29yeV0ucHVzaChkZWZuKTtcbn07XG4iXX0=